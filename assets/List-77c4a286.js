import{r as t,a as he,i as k,ax as Je,_ as Qe,h as be,q as H,O as X,p as Rt,l as Mt,ay as pt,d as De,u as pe,b as bt,az as Ae,aA as Ge}from"./index-4fcbacd4.js";var et=t.forwardRef(function(e,f){var r=e.height,l=e.offsetY,m=e.offsetX,n=e.children,u=e.prefixCls,h=e.onInnerResize,g=e.innerProps,S=e.rtl,v=e.extra,c={},s={display:"flex",flexDirection:"column"};if(l!==void 0){var d;c={height:r,position:"relative",overflow:"hidden"},s=he(he({},s),{},(d={transform:"translateY(".concat(l,"px)")},k(d,S?"marginRight":"marginLeft",-m),k(d,"position","absolute"),k(d,"left",0),k(d,"right",0),k(d,"top",0),d))}return t.createElement("div",{style:c},t.createElement(Je,{onResize:function(i){var M=i.offsetHeight;M&&h&&h()}},t.createElement("div",Qe({style:s,className:be(k({},"".concat(u,"-holder-inner"),u)),ref:f},g),n,v)))});et.displayName="Filler";function Ue(e,f){var r="touches"in e?e.touches[0]:e;return r[f?"pageX":"pageY"]}var je=t.forwardRef(function(e,f){var r,l=e.prefixCls,m=e.rtl,n=e.scrollOffset,u=e.scrollRange,h=e.onStartMove,g=e.onStopMove,S=e.onScroll,v=e.horizontal,c=e.spinSize,s=e.containerSize,d=t.useState(!1),p=H(d,2),i=p[0],M=p[1],y=t.useState(null),b=H(y,2),I=b[0],P=b[1],K=t.useState(null),Y=H(K,2),F=Y[0],L=Y[1],$=!m,z=t.useRef(),q=t.useRef(),x=t.useState(!1),T=H(x,2),A=T[0],Z=T[1],ae=t.useRef(),O=function(){clearTimeout(ae.current),Z(!0),ae.current=setTimeout(function(){Z(!1)},3e3)},j=u-s||0,ie=s-c||0,ge=j>0,W=t.useMemo(function(){if(n===0||j===0)return 0;var D=n/j;return D*ie},[n,j,ie]),J=function(E){E.stopPropagation(),E.preventDefault()},oe=t.useRef({top:W,dragging:i,pageY:I,startTop:F});oe.current={top:W,dragging:i,pageY:I,startTop:F};var Q=function(E){M(!0),P(Ue(E,v)),L(oe.current.top),h(),E.stopPropagation(),E.preventDefault()};t.useEffect(function(){var D=function(ue){ue.preventDefault()},E=z.current,V=q.current;return E.addEventListener("touchstart",D),V.addEventListener("touchstart",Q),function(){E.removeEventListener("touchstart",D),V.removeEventListener("touchstart",Q)}},[]);var Se=t.useRef();Se.current=j;var le=t.useRef();le.current=ie,t.useEffect(function(){if(i){var D,E=function(ue){var ce=oe.current,xe=ce.dragging,Ee=ce.pageY,ee=ce.startTop;if(X.cancel(D),xe){var Re=Ue(ue,v)-Ee,te=ee;!$&&v?te-=Re:te+=Re;var re=Se.current,Me=le.current,ne=Me?te/Me:0,N=Math.ceil(ne*re);N=Math.max(N,0),N=Math.min(N,re),D=X(function(){S(N,v)})}},V=function(){M(!1),g()};return window.addEventListener("mousemove",E),window.addEventListener("touchmove",E),window.addEventListener("mouseup",V),window.addEventListener("touchend",V),function(){window.removeEventListener("mousemove",E),window.removeEventListener("touchmove",E),window.removeEventListener("mouseup",V),window.removeEventListener("touchend",V),X.cancel(D)}}},[i]),t.useEffect(function(){O()},[n]),t.useImperativeHandle(f,function(){return{delayHidden:O}});var B="".concat(l,"-scrollbar"),C={position:"absolute",visibility:A&&ge?null:"hidden"},_={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return v?(C.height=8,C.left=0,C.right=0,C.bottom=0,_.height="100%",_.width=c,$?_.left=W:_.right=W):(C.width=8,C.top=0,C.bottom=0,$?C.right=0:C.left=0,_.width="100%",_.height=c,_.top=W),t.createElement("div",{ref:z,className:be(B,(r={},k(r,"".concat(B,"-horizontal"),v),k(r,"".concat(B,"-vertical"),!v),k(r,"".concat(B,"-visible"),A),r)),style:C,onMouseDown:J,onMouseMove:O},t.createElement("div",{ref:q,className:be("".concat(B,"-thumb"),k({},"".concat(B,"-thumb-moving"),i)),style:_,onMouseDown:Q}))});function xt(e){var f=e.children,r=e.setRef,l=t.useCallback(function(m){r(m)},[]);return t.cloneElement(f,{ref:l})}function Et(e,f,r,l,m,n,u){var h=u.getKey;return e.slice(f,r+1).map(function(g,S){var v=f+S,c=n(g,v,{style:{width:l}}),s=h(g);return t.createElement(xt,{key:s,setRef:function(p){return m(g,p)}},c)})}var yt=function(){function e(){Mt(this,e),this.maps=void 0,this.id=0,this.maps=Object.create(null)}return Rt(e,[{key:"set",value:function(r,l){this.maps[r]=l,this.id+=1}},{key:"get",value:function(r){return this.maps[r]}}]),e}();function wt(e,f,r){var l=t.useState(0),m=H(l,2),n=m[0],u=m[1],h=t.useRef(new Map),g=t.useRef(new yt),S=t.useRef();function v(){X.cancel(S.current)}function c(){v(),S.current=X(function(){h.current.forEach(function(d,p){if(d&&d.offsetParent){var i=pt(d),M=i.offsetHeight;g.current.get(p)!==M&&g.current.set(p,i.offsetHeight)}}),u(function(d){return d+1})})}function s(d,p){var i=e(d),M=h.current.get(i);p?(h.current.set(i,p),c()):h.current.delete(i),!M!=!p&&(p?f==null||f(d):r==null||r(d))}return t.useEffect(function(){return v},[]),[s,c,g.current,n]}function zt(e,f,r,l,m,n,u,h){var g=t.useRef();return function(S){if(S==null){h();return}if(X.cancel(g.current),typeof S=="number")u(S);else if(S&&De(S)==="object"){var v,c=S.align;"index"in S?v=S.index:v=f.findIndex(function(i){return m(i)===S.key});var s=S.offset,d=s===void 0?0:s,p=function i(M,y){if(!(M<0||!e.current)){var b=e.current.clientHeight,I=!1,P=y;if(b){for(var K=y||c,Y=0,F=0,L=0,$=Math.min(f.length,v),z=0;z<=$;z+=1){var q=m(f[z]);F=Y;var x=r.get(q);L=F+(x===void 0?l:x),Y=L,z===v&&x===void 0&&(I=!0)}var T=null;switch(K){case"top":T=F-d;break;case"bottom":T=L-b+d;break;default:{var A=e.current.scrollTop,Z=A+b;F<A?P="top":L>Z&&(P="bottom")}}T!==null&&T!==e.current.scrollTop&&u(T)}g.current=X(function(){I&&n(),i(M-1,P)},2)}};p(3)}}}function Lt(e,f,r){var l=e.length,m=f.length,n,u;if(l===0&&m===0)return null;l<m?(n=e,u=f):(n=f,u=e);var h={__EMPTY_ITEM__:!0};function g(p){return p!==void 0?r(p):h}for(var S=null,v=Math.abs(l-m)!==1,c=0;c<u.length;c+=1){var s=g(n[c]),d=g(u[c]);if(s!==d){S=c,v=v||s!==g(u[c+1]);break}}return S===null?null:{index:S,multiple:v}}function _t(e,f,r){var l=t.useState(e),m=H(l,2),n=m[0],u=m[1],h=t.useState(null),g=H(h,2),S=g[0],v=g[1];return t.useEffect(function(){var c=Lt(n||[],e||[],f);(c==null?void 0:c.index)!==void 0&&(r==null||r(c.index),v(e[c.index])),u(e)},[e]),[S]}var qe=(typeof navigator>"u"?"undefined":De(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const tt=function(e,f){var r=t.useRef(!1),l=t.useRef(null);function m(){clearTimeout(l.current),r.current=!0,l.current=setTimeout(function(){r.current=!1},50)}var n=t.useRef({top:e,bottom:f});return n.current.top=e,n.current.bottom=f,function(u){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g=u<0&&n.current.top||u>0&&n.current.bottom;return h&&g?(clearTimeout(l.current),r.current=!1):(!g||r.current)&&m(),!r.current&&g}};function Ht(e,f,r,l,m){var n=t.useRef(0),u=t.useRef(null),h=t.useRef(null),g=t.useRef(!1),S=tt(f,r);function v(M,y){X.cancel(u.current),n.current+=y,h.current=y,!S(y)&&(qe||M.preventDefault(),u.current=X(function(){var b=g.current?10:1;m(n.current*b),n.current=0}))}function c(M,y){m(y,!0),qe||M.preventDefault()}var s=t.useRef(null),d=t.useRef(null);function p(M){if(e){X.cancel(d.current),d.current=X(function(){s.current=null},2);var y=M.deltaX,b=M.deltaY,I=M.shiftKey,P=y,K=b;(s.current==="sx"||!s.current&&I&&b&&!y)&&(P=b,K=0,s.current="sx");var Y=Math.abs(P),F=Math.abs(K);s.current===null&&(s.current=l&&Y>F?"x":"y"),s.current==="y"?v(M,K):c(M,P)}}function i(M){e&&(g.current=M.detail===h.current)}return[p,i]}var Tt=14/15;function Ct(e,f,r){var l=t.useRef(!1),m=t.useRef(0),n=t.useRef(null),u=t.useRef(null),h,g=function(s){if(l.current){var d=Math.ceil(s.touches[0].pageY),p=m.current-d;m.current=d,r(p)&&s.preventDefault(),clearInterval(u.current),u.current=setInterval(function(){p*=Tt,(!r(p,!0)||Math.abs(p)<=.1)&&clearInterval(u.current)},16)}},S=function(){l.current=!1,h()},v=function(s){h(),s.touches.length===1&&!l.current&&(l.current=!0,m.current=Math.ceil(s.touches[0].pageY),n.current=s.target,n.current.addEventListener("touchmove",g),n.current.addEventListener("touchend",S))};h=function(){n.current&&(n.current.removeEventListener("touchmove",g),n.current.removeEventListener("touchend",S))},pe(function(){return e&&f.current.addEventListener("touchstart",v),function(){var c;(c=f.current)===null||c===void 0||c.removeEventListener("touchstart",v),h(),clearInterval(u.current)}},[e])}var Dt=20;function Ze(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=e/f*100;return isNaN(r)&&(r=0),r=Math.max(r,Dt),r=Math.min(r,e/2),Math.floor(r)}function It(e,f,r,l){var m=t.useMemo(function(){return[new Map,[]]},[e,r.id,l]),n=H(m,2),u=n[0],h=n[1],g=function(v){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v,s=u.get(v),d=u.get(c);if(s===void 0||d===void 0)for(var p=e.length,i=h.length;i<p;i+=1){var M,y=e[i],b=f(y);u.set(b,i);var I=(M=r.get(b))!==null&&M!==void 0?M:l;if(h[i]=(h[i-1]||0)+I,b===v&&(s=i),b===c&&(d=i),s!==void 0&&d!==void 0)break}return{top:h[s-1]||0,bottom:h[d]}};return g}var Pt=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender"],Ot=[],Nt={overflowY:"auto",overflowAnchor:"none"};function kt(e,f){var r=e.prefixCls,l=r===void 0?"rc-virtual-list":r,m=e.className,n=e.height,u=e.itemHeight,h=e.fullHeight,g=h===void 0?!0:h,S=e.style,v=e.data,c=e.children,s=e.itemKey,d=e.virtual,p=e.direction,i=e.scrollWidth,M=e.component,y=M===void 0?"div":M,b=e.onScroll,I=e.onVirtualScroll,P=e.onVisibleChange,K=e.innerProps,Y=e.extraRender,F=bt(e,Pt),L=!!(d!==!1&&n&&u),$=L&&v&&(u*v.length>n||!!i),z=p==="rtl",q=be(l,k({},"".concat(l,"-rtl"),z),m),x=v||Ot,T=t.useRef(),A=t.useRef(),Z=t.useState(0),ae=H(Z,2),O=ae[0],j=ae[1],ie=t.useState(0),ge=H(ie,2),W=ge[0],J=ge[1],oe=t.useState(!1),Q=H(oe,2),Se=Q[0],le=Q[1],B=function(){le(!0)},C=function(){le(!1)},_=t.useCallback(function(a){return typeof s=="function"?s(a):a==null?void 0:a[s]},[s]),D={getKey:_};function E(a){j(function(o){var R;typeof a=="function"?R=a(o):R=a;var w=lt(R);return T.current.scrollTop=w,w})}var V=t.useRef({start:0,end:x.length}),me=t.useRef(),ue=_t(x,_),ce=H(ue,1),xe=ce[0];me.current=xe;var Ee=wt(_,null,null),ee=H(Ee,4),Re=ee[0],te=ee[1],re=ee[2],Me=ee[3],ne=t.useMemo(function(){if(!L)return{scrollHeight:void 0,start:0,end:x.length-1,offset:void 0};if(!$){var a;return{scrollHeight:((a=A.current)===null||a===void 0?void 0:a.offsetHeight)||0,start:0,end:x.length-1,offset:void 0}}for(var o=0,R,w,U,gt=x.length,de=0;de<gt;de+=1){var St=x[de],mt=_(St),Be=re.get(mt),Ce=o+(Be===void 0?u:Be);Ce>=O&&R===void 0&&(R=de,w=o),Ce>O+n&&U===void 0&&(U=de),o=Ce}return R===void 0&&(R=0,w=0,U=Math.ceil(n/u)),U===void 0&&(U=x.length-1),U=Math.min(U+1,x.length-1),{scrollHeight:o,start:R,end:U,offset:w}},[$,L,O,x,Me,n]),N=ne.scrollHeight,se=ne.start,fe=ne.end,Ie=ne.offset;V.current.start=se,V.current.end=fe;var rt=t.useState({width:0,height:n}),Pe=H(rt,2),G=Pe[0],nt=Pe[1],at=function(o){nt(o)},Oe=t.useRef(),Ne=t.useRef(),it=t.useMemo(function(){return Ze(G.width,i)},[G.width,i]),ot=t.useMemo(function(){return Ze(G.height,N)},[G.height,N]),ye=N-n,we=t.useRef(ye);we.current=ye;function lt(a){var o=a;return Number.isNaN(we.current)||(o=Math.min(o,we.current)),o=Math.max(o,0),o}var ke=O<=0,Ye=O>=ye,ut=tt(ke,Ye),ze=function(){return{x:z?-W:W,y:O}},Le=t.useRef(ze()),_e=Ae(function(){if(I){var a=ze();(Le.current.x!==a.x||Le.current.y!==a.y)&&(I(a),Le.current=a)}});function Fe(a,o){var R=a;o?(Ge.flushSync(function(){J(R)}),_e()):E(R)}function ct(a){var o=a.currentTarget.scrollTop;o!==O&&E(o),b==null||b(a),_e()}var He=function(o){var R=o,w=i-G.width;return R=Math.max(R,0),R=Math.min(R,w),R},st=Ae(function(a,o){o?(Ge.flushSync(function(){J(function(R){var w=R+(z?-a:a);return He(w)})}),_e()):E(function(R){var w=R+a;return w})}),ft=Ht(L,ke,Ye,!!i,st),$e=H(ft,2),Te=$e[0],We=$e[1];Ct(L,T,function(a,o){return ut(a,o)?!1:(Te({preventDefault:function(){},deltaY:a}),!0)}),pe(function(){function a(R){L&&R.preventDefault()}var o=T.current;return o.addEventListener("wheel",Te),o.addEventListener("DOMMouseScroll",We),o.addEventListener("MozMousePixelScroll",a),function(){o.removeEventListener("wheel",Te),o.removeEventListener("DOMMouseScroll",We),o.removeEventListener("MozMousePixelScroll",a)}},[L]),pe(function(){i&&J(function(a){return He(a)})},[G.width,i]);var Xe=function(){var o,R;(o=Oe.current)===null||o===void 0||o.delayHidden(),(R=Ne.current)===null||R===void 0||R.delayHidden()},Ve=zt(T,x,re,u,_,te,E,Xe);t.useImperativeHandle(f,function(){return{getScrollInfo:ze,scrollTo:function(o){function R(w){return w&&De(w)==="object"&&("left"in w||"top"in w)}R(o)?(o.left!==void 0&&J(He(o.left)),Ve(o.top)):Ve(o)}}}),pe(function(){if(P){var a=x.slice(se,fe+1);P(a,x)}},[se,fe,x]);var vt=It(x,_,re,u),dt=Y==null?void 0:Y({start:se,end:fe,virtual:$,offsetX:W,offsetY:Ie,rtl:z,getSize:vt}),ht=Et(x,se,fe,i,Re,c,D),ve=null;n&&(ve=he(k({},g?"height":"maxHeight",n),Nt),L&&(ve.overflowY="hidden",i&&(ve.overflowX="hidden"),Se&&(ve.pointerEvents="none")));var Ke={};return z&&(Ke.dir="rtl"),t.createElement("div",Qe({style:he(he({},S),{},{position:"relative"}),className:q},Ke,F),t.createElement(Je,{onResize:at},t.createElement(y,{className:"".concat(l,"-holder"),style:ve,ref:T,onScroll:ct,onMouseEnter:Xe},t.createElement(et,{prefixCls:l,height:N,offsetX:W,offsetY:Ie,scrollWidth:i,onInnerResize:te,ref:A,innerProps:K,rtl:z,extra:dt},ht))),$&&N>n&&t.createElement(je,{ref:Oe,prefixCls:l,scrollOffset:O,scrollRange:N,rtl:z,onScroll:Fe,onStartMove:B,onStopMove:C,spinSize:ot,containerSize:G.height}),$&&i&&t.createElement(je,{ref:Ne,prefixCls:l,scrollOffset:W,scrollRange:i,rtl:z,onScroll:Fe,onStartMove:B,onStopMove:C,spinSize:it,containerSize:G.width,horizontal:!0}))}var Yt=t.forwardRef(kt);Yt.displayName="List";export{Yt as L};
